<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Calculadora de Horas - Streamers</title>
<link rel="icon" type="image/png" href="https://cdn.discordapp.com/icons/1286711670734848072/027f16457608805832b82cafef15a08d.webp?size=1024">
<style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #000000, #1a1a1a);
  display: flex;
  justify-content: center;
  align-items: center; /* centraliza verticalmente */
  min-height: 100vh;
  margin: 0;
  color: white;
  overflow: hidden;
  position: relative;
}

/* elementos decorativos no fundo */
.bg-shape {
  position: absolute;
  border-radius: 50%;
  filter: blur(120px);
  opacity: 0.2;
}
.shape1 { width: 400px; height: 400px; background: #fff; top: -100px; left: -100px; animation: moverForma1 15s ease-in-out infinite; }
.shape2 { width: 500px; height: 500px; background: #666; bottom: -150px; right: -150px; animation: moverForma2 20s ease-in-out infinite; }
.shape3 { width: 300px; height: 300px; background: #999; top: 200px; right: 200px; animation: moverForma3 18s ease-in-out infinite; }

@keyframes moverForma1 { 0%{transform:translate(0,0);}50%{transform:translate(20px,20px);}100%{transform:translate(0,0);} }
@keyframes moverForma2 { 0%{transform:translate(0,0);}50%{transform:translate(-25px,15px);}100%{transform:translate(0,0);} }
@keyframes moverForma3 { 0%{transform:translate(0,0);}50%{transform:translate(15px,-20px);}100%{transform:translate(0,0);} }

/* container com efeito vidro e ruído */
.container {
  position: relative;
  width: 450px;
  max-width: 95%;
  padding: 30px 40px;
  text-align: center;
  border-radius: 16px;
  background: rgba(255, 255, 255, 0.15);
  box-shadow: 0 8px 32px rgba(0,0,0,0.4), 0 0 20px rgba(255,255,255,0.1) inset;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.25);
  background-image: radial-gradient(rgba(255,255,255,0.02) 1px, transparent 1px);
  background-size: 10px 10px;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
}

h1 { margin-bottom: 20px; font-size: 24px; color: #fff; }

input {
  width: 90%;
  padding: 12px;
  margin: 6px 0;
  border: none;
  border-radius: 8px;
  outline: none;
  background: rgba(255, 255, 255, 0.1);
  color: white;
  font-size: 16px;
}
input::placeholder { color: rgba(255, 255, 255, 0.5); }

button {
  margin: 8px 6px;
  padding: 10px 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  background: rgba(255,255,255,0.1);
  color: white;
  transition: 0.3s;
  font-size: 16px;
}
button:hover { background: rgba(255,255,255,0.25); }

#btn-salvar { display:none; background-color:#00bfff; color:white; }
#btn-salvar:hover { background-color:#1e90ff; }

#resultado {
  margin-top: 20px;
  padding: 12px;
  background: rgba(255,255,255,0.1);
  border-radius: 8px;
  font-size: 18px;
  font-weight: bold;
}

#historico {
  margin-top: 20px;
  text-align: left;
  max-height: 200px;
  overflow-y: auto;
  padding: 10px;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.05);
}

.entrada {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin: 6px 0;
  padding: 6px 10px;
  border-radius: 6px;
  background: rgba(255,255,255,0.07);
  font-size: 14px;
}
.entrada.edicao { border: 2px solid #00bfff; }

.entrada span { flex-grow: 1; }

.acao-btn {
  margin-left: 6px;
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 14px;
  transition: 0.2s;
}
.acao-btn.remover { color: #ff4d4d; }
.acao-btn.remover:hover { color: #ff1a1a; }
.acao-btn.editar { color: #00bfff; }
.acao-btn.editar:hover { color: #1e90ff; }

@media(max-width:500px){
  .container{padding:20px;width:95%;}
  button,input{width:100%;margin:5px 0;}
}
</style>
</head>
<body>
<div class="bg-shape shape1"></div>
<div class="bg-shape shape2"></div>
<div class="bg-shape shape3"></div>

<div class="container">
<h1>📊 Calculadora de Horas</h1>

<input type="text" id="nome" placeholder="Nome do streamer" />
<input type="number" id="horas" placeholder="Horas" min="0" />
<input type="number" id="minutos" placeholder="Minutos" min="0" max="59" />

<div>
<button id="btn-add">➕ Contabilizar</button>
<button id="btn-sub">➖ Subtrair</button>
<button id="btn-salvar">💾 Salvar alteração</button>
<button id="btn-reset">🔄 Resetar</button>
</div>

<div id="resultado">Nenhum cálculo realizado ainda.</div>
<div id="historico"><strong>Histórico:</strong></div>
</div>

<script>
const nomeInput=document.getElementById("nome");
const horasInput=document.getElementById("horas");
const minutosInput=document.getElementById("minutos");
const resultadoDiv=document.getElementById("resultado");
const historicoDiv=document.getElementById("historico");
const btnAdd=document.getElementById("btn-add");
const btnSub=document.getElementById("btn-sub");
const btnReset=document.getElementById("btn-reset");
const btnSalvar=document.getElementById("btn-salvar");

let historico=JSON.parse(localStorage.getItem("historico"))||[];
let totalMinutos=parseInt(localStorage.getItem("totalMinutos"))||0;
let editId=null;

function formatarTempo(minutos){const h=Math.floor(minutos/60);const m=minutos%60;return `${h}h ${m}min`; }

function atualizarResultado(){
  if(historico.length===0) resultadoDiv.textContent="Nenhum cálculo realizado ainda.";
  else resultadoDiv.textContent=`${historico[historico.length-1].nome} → ${formatarTempo(totalMinutos)} contabilizados.`;
}

function atualizarHistorico(){
  historicoDiv.innerHTML="<strong>Histórico:</strong>";
  historico.forEach(entry=>{
    const div=document.createElement("div");
    div.className="entrada"+(editId===entry.id?' edicao':'');
    const span=document.createElement("span");
    span.textContent=`${entry.nome}: ${entry.fator>0?'+':'-'} ${entry.horas}h ${entry.minutos}m`;
    const btnEditar=document.createElement("button");
    btnEditar.className="acao-btn editar"; btnEditar.textContent="✏️";
    btnEditar.onclick=()=>prepararEdicao(entry.id);
    const btnRemover=document.createElement("button");
    btnRemover.className="acao-btn remover"; btnRemover.textContent="❌";
    btnRemover.onclick=()=>remover(entry.id);
    div.append(span,btnEditar,btnRemover);
    historicoDiv.appendChild(div);
  });
}

function salvarStorage(){
  localStorage.setItem("historico",JSON.stringify(historico));
  localStorage.setItem("totalMinutos",totalMinutos);
}

function contabilizar(fator){
  const nome=nomeInput.value.trim();
  const horas=parseInt(horasInput.value)||0;
  const minutos=parseInt(minutosInput.value)||0;
  if(!nome){alert("Informe o nome!"); return;}
  if(horas<0||minutos<0||minutos>59){alert("Valores inválidos!"); return;}
  const minutosTotais=(horas*60+minutos)*fator;
  totalMinutos+=minutosTotais;
  historico.push({id:Date.now(),nome,horas,minutos,fator});
  salvarStorage();
  limparCampos();
  atualizarResultado();
  atualizarHistorico();
}

function prepararEdicao(id){
  const entry=historico.find(e=>e.id===id);
  if(!entry) return;
  nomeInput.value=entry.nome;
  horasInput.value=entry.horas;
  minutosInput.value=entry.minutos;
  editId=id;
  btnSalvar.style.display='inline-block';
  atualizarHistorico();
}

function salvarEdicao(){
  if(editId===null) return;
  const entry=historico.find(e=>e.id===editId);
  if(!entry) return;
  const novoNome=nomeInput.value.trim()||entry.nome;
  const novasHoras=parseInt(horasInput.value)||0;
  const novosMinutos=parseInt(minutosInput.value)||0;
  if(novasHoras<0||novosMinutos<0||novosMinutos>59){alert("Valores inválidos!"); return;}
  const minutosAntigos=(entry.horas*60+entry.minutos)*entry.fator;
  const minutosNovos=(novasHoras*60+novosMinutos)*entry.fator;
  totalMinutos=totalMinutos-minutosAntigos+minutosNovos;
  entry.nome=novoNome; entry.horas=novasHoras; entry.minutos=novosMinutos;
  editId=null; btnSalvar.style.display='none';
  salvarStorage();
  limparCampos();
  atualizarResultado();
  atualizarHistorico();
}

function remover(id){
  if(!confirm("Deseja remover esta entrada?")) return;
  const entry=historico.find(e=>e.id===id);
  if(!entry) return;
  totalMinutos-=(entry.horas*60+entry.minutos)*entry.fator;
  historico=historico.filter(e=>e.id!==id);
  salvarStorage();
  atualizarResultado();
  atualizarHistorico();
}

function limparCampos(){nomeInput.value=''; horasInput.value=''; minutosInput.value=''; nomeInput.focus();}

function resetar(){
  if(!confirm("Resetar todos os dados?")) return;
  historico=[]; totalMinutos=0; editId=null; btnSalvar.style.display='none';
  salvarStorage(); atualizarResultado(); atualizarHistorico(); limparCampos();
}

btnAdd.addEventListener("click",()=>contabilizar(1));
btnSub.addEventListener("click",()=>contabilizar(-1));
btnSalvar.addEventListener("click",salvarEdicao);
btnReset.addEventListener("click",resetar);

atualizarResultado(); atualizarHistorico();
</script>
</body>
</html>
